!function(a,b){"use strict";var c=function(a,b){var c=document.createElement("canvas");return c.setAttribute("width",a),c.setAttribute("height",b),c.getContext("2d")},d=function(a,b){var d=new Image,e=a.src||a;"data:"!==e.substring(0,5)&&(d.crossOrigin="Anonymous"),d.onload=function(){var a=c(d.width,d.height);a.drawImage(d,0,0);var e=a.getImageData(0,0,d.width,d.height);b&&b(e.data)},d.src=e},e=function(a){return["rgb(",a,")"].join("")},f=function(a){var b=[];for(var c in a)b.push(h(c,a[c]));return b.sort(function(a,b){return b.count-a.count}),b},g=function(a,b){if(a.length>b)return a.slice(0,b);for(var c=a.length-1;c<b-1;c++)a.push(h("0,0,0",0));return a},h=function(a,b){return{name:e(a),count:b}},i={};i.colors=function(a,b){b=b||{};var c=b.exclude||[],h=b.paletteSize||10;d(a,function(a){for(var d={},i="",j=[],k=0;k<a.length;k+=4)j[0]=a[k],j[1]=a[k+1],j[2]=a[k+2],i=j.join(","),-1===j.indexOf(void 0)&&0!==a[k+3]&&-1===c.indexOf(e(i))&&(d[i]=i in d?d[i]+1:1);if(b.success){var l=g(f(d),h+1);b.success({dominant:l[0].name,secondary:l[1].name,palette:l.map(function(a){return a.name}).slice(1)})}})},a.RGBaster=a.RGBaster||i}(window);